#!/bin/python
import argparse
import pkg_resources
import os
import shutil
import subprocess


def copy_configuration_file(confile):
    path = os.path.join('configure', confile)
    confile = pkg_resources.resource_filename('validate', path)
    shutil.copy(confile, './conf.yaml')

def args():
    parser = argparse.ArgumentParser()
    parser.add_argument('-m', '--maps',
                        action='store_true',
                        default=False,
                        help='gets configuration for maps only')
    parser.add_argument('-t', '--taylor',
                        action='store_true',
                        default=False,
                        help='gets configuration for taylor diagrams only')
    parser.add_argument('-l', '--line',
                        action='store_true',
                        default=False,
                        help='gets configuration for line plots only')
    parser.add_argument('-n', '--trends',
                        action='store_true',
                        default=False,
                        help='gets configuration for trend maps only')
    parser.add_argument('-s', '--simple',
                        action='store_true',
                        default=False,
                        help='gets configuration for simple plot only')
                             
    args = parser.parse_args()
    opts = vars(args)
    confile = 'conf.yaml'
    if opts['maps']:
        confile = 'conf_maps.yaml'
    if opts['taylor']:
        confile = 'conf_taylor.yaml'
    if opts['simple']:
        confile = 'conf_simple.yaml'
    if opts['line']:
        confile = 'conf_line.yaml'
    if opts['trends']:
        confile = 'conf_trends.yaml'    
    
    if not os.path.isfile('conf.yaml'):
        copy_configuration_file(confile)
    try:
        p = subprocess.Popen(['kwrite', 'conf.yaml'])
    except:
        pass

if __name__ == "__main__":
    args()
